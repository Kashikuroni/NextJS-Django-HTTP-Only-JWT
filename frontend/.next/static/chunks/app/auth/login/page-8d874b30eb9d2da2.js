(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{2018:(e,t,r)=>{Promise.resolve().then(r.bind(r,8972))},8972:(e,t,r)=>{"use strict";r.d(t,{LoginForm:()=>l});var a=r(5155),s=r(2115),n=r(6046),o=r(8755),i=r(2878);let l=()=>{let e=(0,n.useRouter)(),[t,r]=(0,s.useState)({email:"",password:""}),[l,u]=(0,s.useState)(null),c=e=>{r({...t,[e.target.name]:e.target.value})},d=async r=>{r.preventDefault();try{await o.A.login(t),e.push("/")}catch(e){u(e),console.error(e)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center max-w-70",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Вход"}),(0,a.jsxs)("form",{onSubmit:d,className:"flex flex-col gap-3",children:[(0,a.jsx)(i.a,{label:"Email",type:"email",id:"email",name:"email",value:t.email,onChange:c}),(0,a.jsx)(i.a,{label:"Пароль",id:"password",type:"password",name:"password",value:t.password,onChange:c}),(0,a.jsxs)("div",{className:"flex gap-4 mt-2 justify-between",children:[(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit",children:"Войти"}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",onClick:()=>{e.push("/auth/register")},children:"Зарегистрироваться"})]})]})]})}},2878:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var a=r(5155),s=r(4617),n=r.n(s),o=r(2115);let i=e=>{let{id:t,type:r="text",name:s,label:i,value:l,onChange:u,placeholder:c,required:d=!1,...h}=e,[p,f]=(0,o.useState)(null),[g,m]=(0,o.useState)(!1),y=n()("text-sm font-light text-gray-600"),w=n()("w-full text-sm py-1 px-2 bg-transparent","border-2 rounded-md",p?"border-red-500":"border-gray-300","placeholder-gray-300","hover:ring-blue-400 hover:ring hover:border-transparent","focus:ring-blue-400 focus:ring focus:border-transparent","transition-all duration-300 ease-in-out","appearance-none outline-none"),v=n()("absolute text-red-500 text-xs transition-all duration-300 ease-in-out bg-white px-2 py-1 rounded shadow-md","mt-1 left-0 top-full z-40"),x=e=>{e.checkValidity()?f(null):f(e.validationMessage)};return(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full h-full justify-center items-start",children:[(0,a.jsx)("label",{className:y,htmlFor:t,children:i}),(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{className:w,id:t,type:r,name:s,value:l,onChange:e=>{u&&u(e),g&&x(e.target)},onBlur:e=>{m(!0),x(e.target)},placeholder:c,required:d,...h}),g&&p&&(0,a.jsx)("span",{className:n()(v,p?"opacity-100 scale-100":"opacity-0 scale-95","transition-all duration-300"),children:p||""})]})]})}},8755:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2651),s=r(7358);class n{mergeHeaders(e){let t={"Content-Type":"application/json"},r=localStorage.getItem("userToken");return r&&(t.Authorization="Token ".concat(r)),{...t,...e}}async post(e,t,r){let a={headers:this.mergeHeaders(r)};return(await this.api.post(e,t,a)).data}async get(e,t){let r={headers:this.mergeHeaders(t)};return(await this.api.get(e,r)).data}async put(e,t,r){let a={headers:this.mergeHeaders(r)};try{return(await this.api.put(e,t,a)).data}catch(e){throw this.handleError(e)}}async delete(e,t){let r={headers:this.mergeHeaders(t)};try{return(await this.api.delete(e,r)).data}catch(e){throw this.handleError(e)}}constructor(){this.handleError=e=>{var t;return{status:e.status,message:e.message,data:null===(t=e.response)||void 0===t?void 0:t.data}};let e=s.env.NEXT_PUBLIC_DEVELOPMENT_HOST||"http://localhost:8000";this.api=a.A.create({baseURL:e,withCredentials:!0})}}class o extends n{async register(e){try{return await this.post("api/auth/v1/register/",e)}catch(e){if(a.A.isAxiosError(e)&&e.response&&e.response.data){let t=e.response.data;if(t.email||t.username)throw Error("Указанные данные уже используются. Пожалуйста, проверьте введенные данные.");throw Error("Произошла ошибка. Пожалуйста, попробуйте ещё раз.")}}}async login(e){return await this.post("/api/auth/v1/login/",e)}async logout(){return await this.post("/api/auth/v1/logout/")}async deleteAccount(){return await this.delete("/api/auth/v1/users/delete/")}async getUser(){return await this.get("/api/auth/v1/users/")}async refreshToken(){let e=await this.post("/api/auth/v1/refresh/");if(!e||"boolean"!=typeof e.success)throw Error("Invalid response format.");if(!e.success)throw Error(e.message||"Failed to refresh token.");return e}async updateProfile(e){return await this.put("/api/auth/v1/users/",e,{"Content-Type":"multipart/form-data"})}async changePassword(e){return await this.post("/api/users/set_password/",e)}}let i=new o},4617:(e,t)=>{var r;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=n(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)a.call(e,r)&&e[r]&&(t=n(t,r));return t}(r)))}return e}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0!==(r=(function(){return s}).apply(t,[]))&&(e.exports=r)}()}},e=>{var t=t=>e(e.s=t);e.O(0,[238,441,517,358],()=>t(2018)),_N_E=e.O()}]);