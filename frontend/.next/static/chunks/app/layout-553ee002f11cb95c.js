(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2793:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4147,23)),Promise.resolve().then(a.t.bind(a,8489,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,2561))},2561:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,AuthProvider:()=>n});var r=a(5155),s=a(2115),i=a(8755);let o=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,[a,n]=(0,s.useState)(null),[l,h]=(0,s.useState)(!1),[u,d]=(0,s.useState)(!0),c=async()=>{try{let e=await i.A.getUser();n(e),h(!0)}catch(e){console.error("Failed to refresh user data:",e),n(null),h(!1)}finally{d(!1)}};return(0,s.useEffect)(()=>{c()},[]),(0,r.jsx)(o.Provider,{value:{user:a,isAuthenticated:l,loading:u,refreshUser:c,clearAuth:()=>{n(null),h(!1)}},children:t})},l=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8755:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(2651),s=a(7358);class i{mergeHeaders(e){return{"Content-Type":"application/json",...e}}async post(e,t,a){let r={headers:this.mergeHeaders(a)};return(await this.api.post(e,t,r)).data}async get(e,t){let a={headers:this.mergeHeaders(t)};return(await this.api.get(e,a)).data}async put(e,t,a){let r={headers:this.mergeHeaders(a)};try{return(await this.api.put(e,t,r)).data}catch(e){throw this.handleError(e)}}async delete(e,t){let a={headers:this.mergeHeaders(t)};try{return(await this.api.delete(e,a)).data}catch(e){throw this.handleError(e)}}constructor(){this.handleError=e=>{var t;return{status:e.status,message:e.message,data:null===(t=e.response)||void 0===t?void 0:t.data}};let e=s.env.NEXT_PUBLIC_DEVELOPMENT_HOST||"http://localhost:8000";this.api=r.A.create({baseURL:e,withCredentials:!0})}}class o extends i{async register(e){try{return await this.post("api/auth/v1/register/",e)}catch(e){if(r.A.isAxiosError(e)&&e.response&&e.response.data){let t=e.response.data;if(t.email||t.username)throw Error("Указанные данные уже используются. Пожалуйста, проверьте введенные данные.");throw Error("Произошла ошибка. Пожалуйста, попробуйте ещё раз.")}}}async login(e){return await this.post("/api/auth/v1/login/",e)}async logout(){return await this.post("/api/auth/v1/logout/")}async deleteAccount(){return await this.delete("/api/auth/v1/users/delete/")}async getUser(){return await this.get("/api/auth/v1/users/",{"Cache-Control":"no-store"})}async refreshToken(){let e=await this.post("/api/auth/v1/refresh/");if(!e||"boolean"!=typeof e.success)throw Error("Invalid response format.");if(!e.success)throw Error(e.message||"Failed to refresh token.");return e}async updateProfile(e){return await this.put("/api/auth/v1/users/",e,{"Content-Type":"multipart/form-data"})}async changePassword(e){return await this.post("/api/users/set_password/",e)}}let n=new o},347:()=>{},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[896,651,441,517,358],()=>t(2793)),_N_E=e.O()}]);